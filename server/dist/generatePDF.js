"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const html_pdf_1 = __importDefault(require("html-pdf"));
const handlebars_1 = __importDefault(require("handlebars"));
exports.create = function (document, options) {
    return new Promise((resolve, reject) => {
        if (!document || !document.html || !document.data) {
            reject(new Error("Some, or all, options are missing."));
        }
        // Compiles a template
        const html = handlebars_1.default.compile(document.html)(document.data, {
            allowProtoMethodsByDefault: true,
            allowProtoPropertiesByDefault: true
        });
        const pdfPromise = html_pdf_1.default.create(html, options);
        // Create PDF from html template generated by handlebars
        // Output will be PDF file
        pdfPromise.toFile(document.path, (err, res) => {
            if (!err)
                resolve(res);
            else
                reject(err);
        });
    });
};
//# sourceMappingURL=generatePDF.js.map